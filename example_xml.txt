{"description": "Complex REST API with multiple resources implementing CRUD operations. Separate resources for list, create, retrieve, update, delete with appropriate HTTP methods. Each resource extracts parameters, performs validation, logs actions, and constructs method-specific responses with error handling.", "reply": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<api context=\"/products\" name=\"ProductCRUDAPI\" xmlns=\"http://ws.apache.org/ns/synapse\">\n    <resource methods=\"GET\" uri-template=\"/\">\n        <inSequence>\n            <variable name=\"category\" expression=\"${params.queryParams.category}\" type=\"STRING\"/>\n            <log category=\"INFO\"><message>Listing products, category: ${vars.category}</message></log>\n            <payloadFactory media-type=\"json\">\n                <format>{\"products\":[],\"category\":\"${vars.category}\"}</format>\n            </payloadFactory>\n            <respond/>\n        </inSequence>\n    </resource>\n    <resource methods=\"POST\" uri-template=\"/\">\n        <inSequence>\n            <variable name=\"name\" expression=\"${payload.name}\" type=\"STRING\"/>\n            <variable name=\"price\" expression=\"${payload.price}\" type=\"STRING\"/>\n            <filter xpath=\"${exists(payload.name)}\">\n                <then>\n                    <payloadFactory media-type=\"json\">\n                        <format>{\"created\":true,\"id\":\"P123\",\"name\":\"${vars.name}\",\"price\":${vars.price}}</format>\n                    </payloadFactory>\n                </then>\n                <else>\n                    <payloadFactory media-type=\"json\"><format>{\"error\":\"Name required\"}</format></payloadFactory>\n                </else>\n            </filter>\n            <respond/>\n        </inSequence>\n    </resource>\n    <resource methods=\"GET PUT DELETE\" uri-template=\"/{productId}\">\n        <inSequence>\n            <variable name=\"productId\" expression=\"${params.pathParams.productId}\" type=\"STRING\"/>\n            <switch source=\"${props.synapse.REST_METHOD}\">\n                <case regex=\"GET\">\n                    <payloadFactory media-type=\"json\"><format>{\"product\":{\"id\":\"${vars.productId}\",\"name\":\"Sample\"}}</format></payloadFactory>\n                </case>\n                <case regex=\"PUT\">\n                    <payloadFactory media-type=\"json\"><format>{\"updated\":true,\"id\":\"${vars.productId}\"}</format></payloadFactory>\n                </case>\n                <case regex=\"DELETE\">\n                    <payloadFactory media-type=\"json\"><format>{\"deleted\":true,\"id\":\"${vars.productId}\"}</format></payloadFactory>\n                </case>\n            </switch>\n            <respond/>\n        </inSequence>\n    </resource>\n</api>"}